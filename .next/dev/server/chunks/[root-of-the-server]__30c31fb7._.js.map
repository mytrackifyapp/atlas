{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/ekaygabriel/Downloads/trackify-ventures-ui/lib/auth.ts"],"sourcesContent":["import { betterAuth } from \"better-auth\"\nimport { MongoClient } from \"mongodb\"\nimport { mongodbAdapter } from \"better-auth/adapters/mongodb\"\nimport { nextCookies } from \"better-auth/next-js\"\n\n// MongoDB connection\nconst connectionString = process.env.DATABASE_URL || \"mongodb://localhost:27017/trackify-ventures\"\n\n// Extract database name from connection string\nfunction getDatabaseName(connectionString: string): string {\n  try {\n    const url = new URL(connectionString.replace(/^mongodb\\+srv:/, \"mongodb:\"))\n    const pathname = url.pathname\n    // Remove leading slash and get database name\n    const dbName = pathname.split(\"/\")[1]?.split(\"?\")[0] || \"trackify-ventures\"\n    return dbName\n  } catch {\n    // Fallback: try to extract from connection string manually\n    const match = connectionString.match(/\\/([^/?]+)(\\?|$)/)\n    return match ? match[1] : \"trackify-ventures\"\n  }\n}\n\nconst databaseName = getDatabaseName(connectionString)\nconst client = new MongoClient(connectionString)\n\n// Connect to MongoDB (will be called once)\nif (!client.topology?.isConnected()) {\n  client.connect().catch(console.error)\n}\n\n// Explicitly specify the database name\nconst db = client.db(databaseName)\n\nexport const auth = betterAuth({\n  database: mongodbAdapter(db, {\n    client,\n  }),\n  emailAndPassword: {\n    enabled: true,\n    requireEmailVerification: false, // Set to true if you want email verification\n  },\n  user: {\n    additionalFields: {\n      role: {\n        type: \"string\",\n        required: false,\n        defaultValue: null,\n        input: false, // Don't allow user to set role during signup\n      },\n      onboardingCompleted: {\n        type: \"boolean\",\n        required: false,\n        defaultValue: false,\n        input: false,\n      },\n    },\n  },\n  plugins: [nextCookies()],\n})\n\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;AAAA;AACA;;;;;AAEA,qBAAqB;AACrB,MAAM,mBAAmB,QAAQ,GAAG,CAAC,YAAY,IAAI;AAErD,+CAA+C;AAC/C,SAAS,gBAAgB,gBAAwB;IAC/C,IAAI;QACF,MAAM,MAAM,IAAI,IAAI,iBAAiB,OAAO,CAAC,kBAAkB;QAC/D,MAAM,WAAW,IAAI,QAAQ;QAC7B,6CAA6C;QAC7C,MAAM,SAAS,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE,IAAI;QACxD,OAAO;IACT,EAAE,OAAM;QACN,2DAA2D;QAC3D,MAAM,QAAQ,iBAAiB,KAAK,CAAC;QACrC,OAAO,QAAQ,KAAK,CAAC,EAAE,GAAG;IAC5B;AACF;AAEA,MAAM,eAAe,gBAAgB;AACrC,MAAM,SAAS,IAAI,sHAAW,CAAC;AAE/B,2CAA2C;AAC3C,IAAI,CAAC,OAAO,QAAQ,EAAE,eAAe;IACnC,OAAO,OAAO,GAAG,KAAK,CAAC,QAAQ,KAAK;AACtC;AAEA,uCAAuC;AACvC,MAAM,KAAK,OAAO,EAAE,CAAC;AAEd,MAAM,OAAO,IAAA,4XAAU,EAAC;IAC7B,UAAU,IAAA,waAAc,EAAC,IAAI;QAC3B;IACF;IACA,kBAAkB;QAChB,SAAS;QACT,0BAA0B;IAC5B;IACA,MAAM;QACJ,kBAAkB;YAChB,MAAM;gBACJ,MAAM;gBACN,UAAU;gBACV,cAAc;gBACd,OAAO;YACT;YACA,qBAAqB;gBACnB,MAAM;gBACN,UAAU;gBACV,cAAc;gBACd,OAAO;YACT;QACF;IACF;IACA,SAAS;QAAC,IAAA,2YAAW;KAAG;AAC1B"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///Users/ekaygabriel/Downloads/trackify-ventures-ui/lib/db.ts"],"sourcesContent":["import { MongoClient, Db } from \"mongodb\"\n\nconst connectionString = process.env.DATABASE_URL || \"mongodb://localhost:27017/trackify-ventures\"\n\n// Extract database name from connection string\nfunction getDatabaseName(connectionString: string): string {\n  try {\n    const url = new URL(connectionString.replace(/^mongodb\\+srv:/, \"mongodb:\"))\n    const pathname = url.pathname\n    // Remove leading slash and get database name\n    const dbName = pathname.split(\"/\")[1]?.split(\"?\")[0] || \"trackify-ventures\"\n    return dbName\n  } catch {\n    // Fallback: try to extract from connection string manually\n    const match = connectionString.match(/\\/([^/?]+)(\\?|$)/)\n    return match ? match[1] : \"trackify-ventures\"\n  }\n}\n\nconst databaseName = getDatabaseName(connectionString)\n\nlet client: MongoClient | null = null\nlet db: Db | null = null\n\nexport async function getDatabase(): Promise<Db> {\n  if (db) {\n    return db\n  }\n\n  if (!client) {\n    client = new MongoClient(connectionString)\n    await client.connect()\n  }\n\n  // Explicitly specify the database name\n  db = client.db(databaseName)\n  return db\n}\n\n// For cleanup if needed\nexport async function closeDatabase() {\n  if (client) {\n    await client.close()\n    client = null\n    db = null\n  }\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,mBAAmB,QAAQ,GAAG,CAAC,YAAY,IAAI;AAErD,+CAA+C;AAC/C,SAAS,gBAAgB,gBAAwB;IAC/C,IAAI;QACF,MAAM,MAAM,IAAI,IAAI,iBAAiB,OAAO,CAAC,kBAAkB;QAC/D,MAAM,WAAW,IAAI,QAAQ;QAC7B,6CAA6C;QAC7C,MAAM,SAAS,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE,IAAI;QACxD,OAAO;IACT,EAAE,OAAM;QACN,2DAA2D;QAC3D,MAAM,QAAQ,iBAAiB,KAAK,CAAC;QACrC,OAAO,QAAQ,KAAK,CAAC,EAAE,GAAG;IAC5B;AACF;AAEA,MAAM,eAAe,gBAAgB;AAErC,IAAI,SAA6B;AACjC,IAAI,KAAgB;AAEb,eAAe;IACpB,IAAI,IAAI;QACN,OAAO;IACT;IAEA,IAAI,CAAC,QAAQ;QACX,SAAS,IAAI,sHAAW,CAAC;QACzB,MAAM,OAAO,OAAO;IACtB;IAEA,uCAAuC;IACvC,KAAK,OAAO,EAAE,CAAC;IACf,OAAO;AACT;AAGO,eAAe;IACpB,IAAI,QAAQ;QACV,MAAM,OAAO,KAAK;QAClB,SAAS;QACT,KAAK;IACP;AACF"}},
    {"offset": {"line": 171, "column": 0}, "map": {"version":3,"sources":["file:///Users/ekaygabriel/Downloads/trackify-ventures-ui/app/api/user/check-onboarding/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { headers } from \"next/headers\"\nimport { getDatabase } from \"@/lib/db\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await auth.api.getSession({\n      headers: await headers(),\n    })\n\n    if (!session) {\n      return NextResponse.json({ onboardingCompleted: false }, { status: 200 })\n    }\n\n    // Get user with role from database\n    const db = await getDatabase()\n    const user = await db.collection(\"user\").findOne({ id: session.user.id })\n\n    return NextResponse.json({\n      onboardingCompleted: user?.onboardingCompleted || false,\n      role: user?.role || null,\n    })\n  } catch (error) {\n    console.error(\"Error checking onboarding status:\", error)\n    return NextResponse.json(\n      { onboardingCompleted: false, error: \"Failed to check status\" },\n      { status: 500 }\n    )\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,UAAU,MAAM,qHAAI,CAAC,GAAG,CAAC,UAAU,CAAC;YACxC,SAAS,MAAM,IAAA,4QAAO;QACxB;QAEA,IAAI,CAAC,SAAS;YACZ,OAAO,gRAAY,CAAC,IAAI,CAAC;gBAAE,qBAAqB;YAAM,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEA,mCAAmC;QACnC,MAAM,KAAK,MAAM,IAAA,0HAAW;QAC5B,MAAM,OAAO,MAAM,GAAG,UAAU,CAAC,QAAQ,OAAO,CAAC;YAAE,IAAI,QAAQ,IAAI,CAAC,EAAE;QAAC;QAEvE,OAAO,gRAAY,CAAC,IAAI,CAAC;YACvB,qBAAqB,MAAM,uBAAuB;YAClD,MAAM,MAAM,QAAQ;QACtB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qCAAqC;QACnD,OAAO,gRAAY,CAAC,IAAI,CACtB;YAAE,qBAAqB;YAAO,OAAO;QAAyB,GAC9D;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}